"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/files";
exports.ids = ["pages/api/files"];
exports.modules = {

/***/ "(api-node)/./node_modules/.pnpm/next@15.3.4_@babel+core@7.2_3e2eebc2d06427d442dba2246cbfad72/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.3.4_@babel+core@7.2_3e2eebc2d06427d442dba2246cbfad72/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/.pnpm/next@15.3.4_@babel+core@7.2_3e2eebc2d06427d442dba2246cbfad72/node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/.pnpm/next@15.3.4_@babel+core@7.2_3e2eebc2d06427d442dba2246cbfad72/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/.pnpm/next@15.3.4_@babel+core@7.2_3e2eebc2d06427d442dba2246cbfad72/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\files.js */ \"(api-node)/./pages/api/files.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/files\",\n        pathname: \"/api/files\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9uZXh0QDE1LjMuNF9AYmFiZWwrY29yZUA3LjJfM2UyZWViYzJkMDY0MjdkNDQyZGJhMjI0NmNiZmFkNzIvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1yb3V0ZS1sb2FkZXIvaW5kZXguanM/a2luZD1QQUdFU19BUEkmcGFnZT0lMkZhcGklMkZmaWxlcyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDZmlsZXMuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDbUQ7QUFDbkQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxnREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxmaWxlcy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZmlsZXNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9maWxlc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/.pnpm/next@15.3.4_@babel+core@7.2_3e2eebc2d06427d442dba2246cbfad72/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/files.js":
/*!****************************!*\
  !*** ./pages/api/files.js ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _utils_quark_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/quark-api */ \"(api-node)/./utils/quark-api.js\");\n/* harmony import */ var _utils_db_cache__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/db-cache */ \"(api-node)/./utils/db-cache.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_utils_quark_api__WEBPACK_IMPORTED_MODULE_0__]);\n_utils_quark_api__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n  const cookie = process.env.QUARK_COOKIE;\n  if (!cookie) {\n    return res.status(500).json({\n      error: 'Server misconfiguration: QUARK_COOKIE is not set.'\n    });\n  }\n  const {\n    pdir_fid,\n    page = 1,\n    sort = 'file_name:asc'\n  } = req.query;\n  if (!pdir_fid) {\n    return res.status(400).json({\n      error: 'pdir_fid parameter is required.'\n    });\n  }\n  try {\n    const data = await (0,_utils_quark_api__WEBPACK_IMPORTED_MODULE_0__.getCachedQuarkFiles)(pdir_fid, cookie, page, sort);\n    if (data.status !== 200) {\n      const errorMessage = data.message === 'require login [guest]' ? 'Cookie已失效' : data.message;\n      return res.status(502).json({\n        error: 'Failed to fetch data from Quark API.',\n        details: errorMessage\n      });\n    }\n\n    // We are now triggering the indexer from the frontend.\n    // This endpoint is only responsible for serving file pages.\n    // We can still cache the page we fetched to speed up initial view.\n    if (data.data && data.data.list && data.data.list.length > 0) {\n      (0,_utils_db_cache__WEBPACK_IMPORTED_MODULE_1__.cacheFilesToDb)(data.data.list).catch(err => {\n        console.error(\"Error in background DB cache for page:\", err);\n      });\n    }\n    res.status(200).json(data);\n  } catch (error) {\n    console.error('API route error:', error);\n    res.status(500).json({\n      error: 'An unexpected server error occurred.',\n      details: error.message\n    });\n  }\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9maWxlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEQ7QUFDTjtBQUV2QyxlQUFlRSxPQUFPQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtFQUM1QyxNQUFNQyxNQUFNLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxZQUFZO0VBQ3ZDLElBQUksQ0FBQ0gsTUFBTSxFQUFFO0lBQ1QsT0FBT0QsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxLQUFLLEVBQUU7SUFBb0QsQ0FBQyxDQUFDO0VBQy9GO0VBRUEsTUFBTTtJQUFFQyxRQUFRO0lBQUVDLElBQUksR0FBRyxDQUFDO0lBQUVDLElBQUksR0FBRztFQUFnQixDQUFDLEdBQUdYLEdBQUcsQ0FBQ1ksS0FBSztFQUVoRSxJQUFJLENBQUNILFFBQVEsRUFBRTtJQUNYLE9BQU9SLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsS0FBSyxFQUFFO0lBQWtDLENBQUMsQ0FBQztFQUM3RTtFQUVBLElBQUk7SUFDQSxNQUFNSyxJQUFJLEdBQUcsTUFBTWhCLHFFQUFtQixDQUFDWSxRQUFRLEVBQUVQLE1BQU0sRUFBRVEsSUFBSSxFQUFFQyxJQUFJLENBQUM7SUFFcEUsSUFBSUUsSUFBSSxDQUFDUCxNQUFNLEtBQUssR0FBRyxFQUFFO01BQ3JCLE1BQU1RLFlBQVksR0FBR0QsSUFBSSxDQUFDRSxPQUFPLEtBQUssdUJBQXVCLEdBQUcsV0FBVyxHQUFHRixJQUFJLENBQUNFLE9BQU87TUFDMUYsT0FBT2QsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUUsc0NBQXNDO1FBQUVRLE9BQU8sRUFBRUY7TUFBYSxDQUFDLENBQUM7SUFDekc7O0lBRUE7SUFDQTtJQUNBO0lBQ0EsSUFBSUQsSUFBSSxDQUFDQSxJQUFJLElBQUlBLElBQUksQ0FBQ0EsSUFBSSxDQUFDSSxJQUFJLElBQUlKLElBQUksQ0FBQ0EsSUFBSSxDQUFDSSxJQUFJLENBQUNDLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDMURwQiwrREFBYyxDQUFDZSxJQUFJLENBQUNBLElBQUksQ0FBQ0ksSUFBSSxDQUFDLENBQUNFLEtBQUssQ0FBQ0MsR0FBRyxJQUFJO1FBQ3hDQyxPQUFPLENBQUNiLEtBQUssQ0FBQyx3Q0FBd0MsRUFBRVksR0FBRyxDQUFDO01BQ2hFLENBQUMsQ0FBQztJQUNOO0lBRUFuQixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTSxJQUFJLENBQUM7RUFFOUIsQ0FBQyxDQUFDLE9BQU9MLEtBQUssRUFBRTtJQUNaYSxPQUFPLENBQUNiLEtBQUssQ0FBQyxrQkFBa0IsRUFBRUEsS0FBSyxDQUFDO0lBQ3hDUCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ2pCQyxLQUFLLEVBQUUsc0NBQXNDO01BQzdDUSxPQUFPLEVBQUVSLEtBQUssQ0FBQ087SUFDbkIsQ0FBQyxDQUFDO0VBQ047QUFDSixDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvbmdcXERlc2t0b3BcXGZvbGRlclxcQ29kZVxccXVhcmtcXHBhZ2VzXFxhcGlcXGZpbGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENhY2hlZFF1YXJrRmlsZXMgfSBmcm9tICcuLi8uLi91dGlscy9xdWFyay1hcGknO1xyXG5pbXBvcnQgeyBjYWNoZUZpbGVzVG9EYiB9IGZyb20gJy4uLy4uL3V0aWxzL2RiLWNhY2hlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICAgIGNvbnN0IGNvb2tpZSA9IHByb2Nlc3MuZW52LlFVQVJLX0NPT0tJRTtcclxuICAgIGlmICghY29va2llKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgbWlzY29uZmlndXJhdGlvbjogUVVBUktfQ09PS0lFIGlzIG5vdCBzZXQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IHBkaXJfZmlkLCBwYWdlID0gMSwgc29ydCA9ICdmaWxlX25hbWU6YXNjJyB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgIGlmICghcGRpcl9maWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ3BkaXJfZmlkIHBhcmFtZXRlciBpcyByZXF1aXJlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldENhY2hlZFF1YXJrRmlsZXMocGRpcl9maWQsIGNvb2tpZSwgcGFnZSwgc29ydCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGRhdGEuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZGF0YS5tZXNzYWdlID09PSAncmVxdWlyZSBsb2dpbiBbZ3Vlc3RdJyA/ICdDb29raWXlt7LlpLHmlYgnIDogZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDIpLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBkYXRhIGZyb20gUXVhcmsgQVBJLicsIGRldGFpbHM6IGVycm9yTWVzc2FnZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gV2UgYXJlIG5vdyB0cmlnZ2VyaW5nIHRoZSBpbmRleGVyIGZyb20gdGhlIGZyb250ZW5kLlxyXG4gICAgICAgIC8vIFRoaXMgZW5kcG9pbnQgaXMgb25seSByZXNwb25zaWJsZSBmb3Igc2VydmluZyBmaWxlIHBhZ2VzLlxyXG4gICAgICAgIC8vIFdlIGNhbiBzdGlsbCBjYWNoZSB0aGUgcGFnZSB3ZSBmZXRjaGVkIHRvIHNwZWVkIHVwIGluaXRpYWwgdmlldy5cclxuICAgICAgICBpZiAoZGF0YS5kYXRhICYmIGRhdGEuZGF0YS5saXN0ICYmIGRhdGEuZGF0YS5saXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY2FjaGVGaWxlc1RvRGIoZGF0YS5kYXRhLmxpc3QpLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gYmFja2dyb3VuZCBEQiBjYWNoZSBmb3IgcGFnZTpcIiwgZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQVBJIHJvdXRlIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICAgICAgICBlcnJvcjogJ0FuIHVuZXhwZWN0ZWQgc2VydmVyIGVycm9yIG9jY3VycmVkLicsIFxyXG4gICAgICAgICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJnZXRDYWNoZWRRdWFya0ZpbGVzIiwiY2FjaGVGaWxlc1RvRGIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29va2llIiwicHJvY2VzcyIsImVudiIsIlFVQVJLX0NPT0tJRSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInBkaXJfZmlkIiwicGFnZSIsInNvcnQiLCJxdWVyeSIsImRhdGEiLCJlcnJvck1lc3NhZ2UiLCJtZXNzYWdlIiwiZGV0YWlscyIsImxpc3QiLCJsZW5ndGgiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/files.js\n");

/***/ }),

/***/ "(api-node)/./utils/cache.js":
/*!************************!*\
  !*** ./utils/cache.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Simple in-memory cache with a TTL (Time-To-Live)\nconst CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\nclass Cache {\n  constructor(ttl) {\n    this.cache = new Map();\n    this.ttl = ttl;\n  }\n  get(key) {\n    const item = this.cache.get(key);\n    if (item && Date.now() - item.timestamp < this.ttl) {\n      return item.data;\n    }\n    this.cache.delete(key); // Delete expired item\n    return null;\n  }\n  set(key, value) {\n    this.cache.set(key, {\n      timestamp: Date.now(),\n      data: value\n    });\n  }\n  delete(key) {\n    this.cache.delete(key);\n  }\n  clear() {\n    this.cache.clear();\n  }\n\n  // Clean up expired cache items occasionally\n  cleanup() {\n    if (Math.random() < 0.1) {\n      for (const [key, value] of this.cache.entries()) {\n        if (Date.now() - value.timestamp > this.ttl) {\n          this.cache.delete(key);\n        }\n      }\n    }\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new Cache(CACHE_TTL));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL2NhY2hlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBLE1BQU1BLFNBQVMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDOztBQUVqQyxNQUFNQyxLQUFLLENBQUM7RUFDUkMsV0FBV0EsQ0FBQ0MsR0FBRyxFQUFFO0lBQ2IsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSUMsR0FBRyxDQUFDLENBQUM7SUFDdEIsSUFBSSxDQUFDRixHQUFHLEdBQUdBLEdBQUc7RUFDbEI7RUFFQUcsR0FBR0EsQ0FBQ0MsR0FBRyxFQUFFO0lBQ0wsTUFBTUMsSUFBSSxHQUFHLElBQUksQ0FBQ0osS0FBSyxDQUFDRSxHQUFHLENBQUNDLEdBQUcsQ0FBQztJQUNoQyxJQUFJQyxJQUFJLElBQUtDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBR0YsSUFBSSxDQUFDRyxTQUFTLEdBQUcsSUFBSSxDQUFDUixHQUFJLEVBQUU7TUFDbEQsT0FBT0ssSUFBSSxDQUFDSSxJQUFJO0lBQ3BCO0lBQ0EsSUFBSSxDQUFDUixLQUFLLENBQUNTLE1BQU0sQ0FBQ04sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN4QixPQUFPLElBQUk7RUFDZjtFQUVBTyxHQUFHQSxDQUFDUCxHQUFHLEVBQUVRLEtBQUssRUFBRTtJQUNaLElBQUksQ0FBQ1gsS0FBSyxDQUFDVSxHQUFHLENBQUNQLEdBQUcsRUFBRTtNQUNoQkksU0FBUyxFQUFFRixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO01BQ3JCRSxJQUFJLEVBQUVHO0lBQ1YsQ0FBQyxDQUFDO0VBQ047RUFFQUYsTUFBTUEsQ0FBQ04sR0FBRyxFQUFFO0lBQ1IsSUFBSSxDQUFDSCxLQUFLLENBQUNTLE1BQU0sQ0FBQ04sR0FBRyxDQUFDO0VBQzFCO0VBRUFTLEtBQUtBLENBQUEsRUFBRztJQUNKLElBQUksQ0FBQ1osS0FBSyxDQUFDWSxLQUFLLENBQUMsQ0FBQztFQUN0Qjs7RUFFQTtFQUNBQyxPQUFPQSxDQUFBLEVBQUc7SUFDTixJQUFJQyxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFO01BQ3JCLEtBQUssTUFBTSxDQUFDWixHQUFHLEVBQUVRLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQ1gsS0FBSyxDQUFDZ0IsT0FBTyxDQUFDLENBQUMsRUFBRTtRQUM3QyxJQUFJWCxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdLLEtBQUssQ0FBQ0osU0FBUyxHQUFHLElBQUksQ0FBQ1IsR0FBRyxFQUFFO1VBQ3pDLElBQUksQ0FBQ0MsS0FBSyxDQUFDUyxNQUFNLENBQUNOLEdBQUcsQ0FBQztRQUMxQjtNQUNKO0lBQ0o7RUFDSjtBQUNKO0FBRUEsaUVBQWUsSUFBSU4sS0FBSyxDQUFDRCxTQUFTLENBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTG9uZ1xcRGVza3RvcFxcZm9sZGVyXFxDb2RlXFxxdWFya1xcdXRpbHNcXGNhY2hlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNpbXBsZSBpbi1tZW1vcnkgY2FjaGUgd2l0aCBhIFRUTCAoVGltZS1Uby1MaXZlKVxyXG5jb25zdCBDQUNIRV9UVEwgPSA1ICogNjAgKiAxMDAwOyAvLyA1IG1pbnV0ZXNcclxuXHJcbmNsYXNzIENhY2hlIHtcclxuICAgIGNvbnN0cnVjdG9yKHR0bCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy50dGwgPSB0dGw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmNhY2hlLmdldChrZXkpO1xyXG4gICAgICAgIGlmIChpdGVtICYmIChEYXRlLm5vdygpIC0gaXRlbS50aW1lc3RhbXAgPCB0aGlzLnR0bCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTsgLy8gRGVsZXRlIGV4cGlyZWQgaXRlbVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHNldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZS5zZXQoa2V5LCB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgZGF0YTogdmFsdWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlKGtleSkge1xyXG4gICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZS5jbGVhcigpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDbGVhbiB1cCBleHBpcmVkIGNhY2hlIGl0ZW1zIG9jY2FzaW9uYWxseVxyXG4gICAgY2xlYW51cCgpIHtcclxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiB0aGlzLmNhY2hlLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSB2YWx1ZS50aW1lc3RhbXAgPiB0aGlzLnR0bCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBDYWNoZShDQUNIRV9UVEwpO1xyXG4iXSwibmFtZXMiOlsiQ0FDSEVfVFRMIiwiQ2FjaGUiLCJjb25zdHJ1Y3RvciIsInR0bCIsImNhY2hlIiwiTWFwIiwiZ2V0Iiwia2V5IiwiaXRlbSIsIkRhdGUiLCJub3ciLCJ0aW1lc3RhbXAiLCJkYXRhIiwiZGVsZXRlIiwic2V0IiwidmFsdWUiLCJjbGVhciIsImNsZWFudXAiLCJNYXRoIiwicmFuZG9tIiwiZW50cmllcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./utils/cache.js\n");

/***/ }),

/***/ "(api-node)/./utils/config.js":
/*!*************************!*\
  !*** ./utils/config.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// utils/config.js\n\nconst quarkConfig = {\n  // 是否启用排序功能\n  enableSorting: true,\n  // 是否启用分享检测功能\n  enableShareDetection: true,\n  // 是否启用调试日志\n  enableDebugLogging: false,\n  // API 请求分页大小\n  apiPageSize: 50,\n  // 分享检测最大重试次数\n  shareCheckMaxRetries: 10,\n  // 分享检测轮询间隔（毫秒）\n  shareCheckPollInterval: 500,\n  // API 请求的 User-Agent\n  userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (quarkConfig);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0FBRUEsTUFBTUEsV0FBVyxHQUFHO0VBQ2xCO0VBQ0FDLGFBQWEsRUFBRSxJQUFJO0VBRW5CO0VBQ0FDLG9CQUFvQixFQUFFLElBQUk7RUFFMUI7RUFDQUMsa0JBQWtCLEVBQUUsS0FBSztFQUV6QjtFQUNBQyxXQUFXLEVBQUUsRUFBRTtFQUVmO0VBQ0FDLG9CQUFvQixFQUFFLEVBQUU7RUFFeEI7RUFDQUMsc0JBQXNCLEVBQUUsR0FBRztFQUUzQjtFQUNBQyxTQUFTLEVBQUU7QUFDYixDQUFDO0FBRUQsaUVBQWVQLFdBQVciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTG9uZ1xcRGVza3RvcFxcZm9sZGVyXFxDb2RlXFxxdWFya1xcdXRpbHNcXGNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB1dGlscy9jb25maWcuanNcclxuXHJcbmNvbnN0IHF1YXJrQ29uZmlnID0ge1xyXG4gIC8vIOaYr+WQpuWQr+eUqOaOkuW6j+WKn+iDvVxyXG4gIGVuYWJsZVNvcnRpbmc6IHRydWUsXHJcblxyXG4gIC8vIOaYr+WQpuWQr+eUqOWIhuS6q+ajgOa1i+WKn+iDvVxyXG4gIGVuYWJsZVNoYXJlRGV0ZWN0aW9uOiB0cnVlLFxyXG5cclxuICAvLyDmmK/lkKblkK/nlKjosIPor5Xml6Xlv5dcclxuICBlbmFibGVEZWJ1Z0xvZ2dpbmc6IGZhbHNlLFxyXG5cclxuICAvLyBBUEkg6K+35rGC5YiG6aG15aSn5bCPXHJcbiAgYXBpUGFnZVNpemU6IDUwLFxyXG5cclxuICAvLyDliIbkuqvmo4DmtYvmnIDlpKfph43or5XmrKHmlbBcclxuICBzaGFyZUNoZWNrTWF4UmV0cmllczogMTAsXHJcblxyXG4gIC8vIOWIhuS6q+ajgOa1i+i9ruivoumXtOmalO+8iOavq+enku+8iVxyXG4gIHNoYXJlQ2hlY2tQb2xsSW50ZXJ2YWw6IDUwMCxcclxuXHJcbiAgLy8gQVBJIOivt+axgueahCBVc2VyLUFnZW50XHJcbiAgdXNlckFnZW50OiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMC4wLjAuMCBTYWZhcmkvNTM3LjM2JyxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHF1YXJrQ29uZmlnO1xyXG4iXSwibmFtZXMiOlsicXVhcmtDb25maWciLCJlbmFibGVTb3J0aW5nIiwiZW5hYmxlU2hhcmVEZXRlY3Rpb24iLCJlbmFibGVEZWJ1Z0xvZ2dpbmciLCJhcGlQYWdlU2l6ZSIsInNoYXJlQ2hlY2tNYXhSZXRyaWVzIiwic2hhcmVDaGVja1BvbGxJbnRlcnZhbCIsInVzZXJBZ2VudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./utils/config.js\n");

/***/ }),

/***/ "(api-node)/./utils/db-cache.js":
/*!***************************!*\
  !*** ./utils/db-cache.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheFilesToDb: () => (/* binding */ cacheFilesToDb)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(api-node)/./utils/prisma.js\");\n\n\n// This function is now centralized and removes the transaction wrapper\n// to reduce the likelihood of database deadlocks under high concurrency.\nasync function cacheFilesToDb(files) {\n  if (!files || files.length === 0) {\n    return;\n  }\n\n  // Execute upserts individually instead of in a single large transaction.\n  // This is less atomic but greatly reduces lock contention.\n  for (const file of files) {\n    try {\n      const data = {\n        fid: file.fid,\n        pdir_fid: file.pdir_fid,\n        file_name: file.file_name,\n        size: BigInt(file.size || 0),\n        dir: file.dir === true,\n        updated_at: new Date(file.updated_at || 0),\n        created_at: new Date(file.created_at || 0)\n      };\n      await _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].file.upsert({\n        where: {\n          fid: file.fid\n        },\n        update: data,\n        create: data\n      });\n    } catch (error) {\n      // Log individual errors but don't stop the whole process.\n      console.error(`Failed to upsert file ${file.fid}:`, error.message);\n    }\n  }\n  console.log(`Processed caching for ${files.length} files.`);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL2RiLWNhY2hlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThCOztBQUU5QjtBQUNBO0FBQ08sZUFBZUMsY0FBY0EsQ0FBQ0MsS0FBSyxFQUFFO0VBQ3hDLElBQUksQ0FBQ0EsS0FBSyxJQUFJQSxLQUFLLENBQUNDLE1BQU0sS0FBSyxDQUFDLEVBQUU7SUFDOUI7RUFDSjs7RUFFQTtFQUNBO0VBQ0EsS0FBSyxNQUFNQyxJQUFJLElBQUlGLEtBQUssRUFBRTtJQUN0QixJQUFJO01BQ0EsTUFBTUcsSUFBSSxHQUFHO1FBQ1RDLEdBQUcsRUFBRUYsSUFBSSxDQUFDRSxHQUFHO1FBQ2JDLFFBQVEsRUFBRUgsSUFBSSxDQUFDRyxRQUFRO1FBQ3ZCQyxTQUFTLEVBQUVKLElBQUksQ0FBQ0ksU0FBUztRQUN6QkMsSUFBSSxFQUFFQyxNQUFNLENBQUNOLElBQUksQ0FBQ0ssSUFBSSxJQUFJLENBQUMsQ0FBQztRQUM1QkUsR0FBRyxFQUFFUCxJQUFJLENBQUNPLEdBQUcsS0FBSyxJQUFJO1FBQ3RCQyxVQUFVLEVBQUUsSUFBSUMsSUFBSSxDQUFDVCxJQUFJLENBQUNRLFVBQVUsSUFBSSxDQUFDLENBQUM7UUFDMUNFLFVBQVUsRUFBRSxJQUFJRCxJQUFJLENBQUNULElBQUksQ0FBQ1UsVUFBVSxJQUFJLENBQUM7TUFDN0MsQ0FBQztNQUNELE1BQU1kLG9EQUFXLENBQUNlLE1BQU0sQ0FBQztRQUNyQkMsS0FBSyxFQUFFO1VBQUVWLEdBQUcsRUFBRUYsSUFBSSxDQUFDRTtRQUFJLENBQUM7UUFDeEJXLE1BQU0sRUFBRVosSUFBSTtRQUNaYSxNQUFNLEVBQUViO01BQ1osQ0FBQyxDQUFDO0lBQ04sQ0FBQyxDQUFDLE9BQU9jLEtBQUssRUFBRTtNQUNaO01BQ0FDLE9BQU8sQ0FBQ0QsS0FBSyxDQUFFLHlCQUF3QmYsSUFBSSxDQUFDRSxHQUFJLEdBQUUsRUFBRWEsS0FBSyxDQUFDRSxPQUFPLENBQUM7SUFDdEU7RUFDSjtFQUNBRCxPQUFPLENBQUNFLEdBQUcsQ0FBRSx5QkFBd0JwQixLQUFLLENBQUNDLE1BQU8sU0FBUSxDQUFDO0FBQy9EIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvbmdcXERlc2t0b3BcXGZvbGRlclxcQ29kZVxccXVhcmtcXHV0aWxzXFxkYi1jYWNoZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHJpc21hIGZyb20gJy4vcHJpc21hJztcclxuXHJcbi8vIFRoaXMgZnVuY3Rpb24gaXMgbm93IGNlbnRyYWxpemVkIGFuZCByZW1vdmVzIHRoZSB0cmFuc2FjdGlvbiB3cmFwcGVyXHJcbi8vIHRvIHJlZHVjZSB0aGUgbGlrZWxpaG9vZCBvZiBkYXRhYmFzZSBkZWFkbG9ja3MgdW5kZXIgaGlnaCBjb25jdXJyZW5jeS5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhY2hlRmlsZXNUb0RiKGZpbGVzKSB7XHJcbiAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFeGVjdXRlIHVwc2VydHMgaW5kaXZpZHVhbGx5IGluc3RlYWQgb2YgaW4gYSBzaW5nbGUgbGFyZ2UgdHJhbnNhY3Rpb24uXHJcbiAgICAvLyBUaGlzIGlzIGxlc3MgYXRvbWljIGJ1dCBncmVhdGx5IHJlZHVjZXMgbG9jayBjb250ZW50aW9uLlxyXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGZpZDogZmlsZS5maWQsXHJcbiAgICAgICAgICAgICAgICBwZGlyX2ZpZDogZmlsZS5wZGlyX2ZpZCxcclxuICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogZmlsZS5maWxlX25hbWUsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBCaWdJbnQoZmlsZS5zaXplIHx8IDApLFxyXG4gICAgICAgICAgICAgICAgZGlyOiBmaWxlLmRpciA9PT0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKGZpbGUudXBkYXRlZF9hdCB8fCAwKSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKGZpbGUuY3JlYXRlZF9hdCB8fCAwKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpbGUudXBzZXJ0KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGZpZDogZmlsZS5maWQgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogZGF0YSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZTogZGF0YSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gTG9nIGluZGl2aWR1YWwgZXJyb3JzIGJ1dCBkb24ndCBzdG9wIHRoZSB3aG9sZSBwcm9jZXNzLlxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gdXBzZXJ0IGZpbGUgJHtmaWxlLmZpZH06YCwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coYFByb2Nlc3NlZCBjYWNoaW5nIGZvciAke2ZpbGVzLmxlbmd0aH0gZmlsZXMuYCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInByaXNtYSIsImNhY2hlRmlsZXNUb0RiIiwiZmlsZXMiLCJsZW5ndGgiLCJmaWxlIiwiZGF0YSIsImZpZCIsInBkaXJfZmlkIiwiZmlsZV9uYW1lIiwic2l6ZSIsIkJpZ0ludCIsImRpciIsInVwZGF0ZWRfYXQiLCJEYXRlIiwiY3JlYXRlZF9hdCIsInVwc2VydCIsIndoZXJlIiwidXBkYXRlIiwiY3JlYXRlIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImxvZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./utils/db-cache.js\n");

/***/ }),

/***/ "(api-node)/./utils/prisma.js":
/*!*************************!*\
  !*** ./utils/prisma.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nlet prisma;\nif (false) {} else {\n  if (!global.prisma) {\n    global.prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n  }\n  prisma = global.prisma;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL3ByaXNtYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsSUFBSUMsTUFBTTtBQUVWLElBQUksT0FBdUMsRUFFMUMsTUFBTTtFQUNMLElBQUksQ0FBQ0MsTUFBTSxDQUFDRCxNQUFNLEVBQUU7SUFDbEJDLE1BQU0sQ0FBQ0QsTUFBTSxHQUFHLElBQUlELHdEQUFZLENBQUMsQ0FBQztFQUNwQztFQUNBQyxNQUFNLEdBQUdDLE1BQU0sQ0FBQ0QsTUFBTTtBQUN4QjtBQUVBLGlFQUFlQSxNQUFNIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvbmdcXERlc2t0b3BcXGZvbGRlclxcQ29kZVxccXVhcmtcXHV0aWxzXFxwcmlzbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5cclxubGV0IHByaXNtYTtcclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xyXG59IGVsc2Uge1xyXG4gIGlmICghZ2xvYmFsLnByaXNtYSkge1xyXG4gICAgZ2xvYmFsLnByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcclxuICB9XHJcbiAgcHJpc21hID0gZ2xvYmFsLnByaXNtYTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcHJpc21hO1xyXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwicHJpc21hIiwiZ2xvYmFsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./utils/prisma.js\n");

/***/ }),

/***/ "(api-node)/./utils/quark-api.js":
/*!****************************!*\
  !*** ./utils/quark-api.js ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCachedQuarkFiles: () => (/* binding */ getCachedQuarkFiles)\n/* harmony export */ });\n/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cache */ \"(api-node)/./utils/cache.js\");\n/* harmony import */ var _quark_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./quark-helpers */ \"(api-node)/./utils/quark-helpers.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_quark_helpers__WEBPACK_IMPORTED_MODULE_1__]);\n_quark_helpers__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function getCachedQuarkFiles(pdir_fid, cookie, page, sort) {\n  const cacheKey = `files:${pdir_fid}-page:${page}-sort:${sort}`;\n  const cachedData = _cache__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(cacheKey);\n  if (cachedData) {\n    return structuredClone(cachedData);\n  }\n  const data = await (0,_quark_helpers__WEBPACK_IMPORTED_MODULE_1__.fetchQuarkFiles)(pdir_fid, cookie, page, sort);\n  if (data?.status === 200) {\n    _cache__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(cacheKey, structuredClone(data));\n  }\n\n  // Clean up expired cache items occasionally\n  if (Math.random() < 0.1) {\n    // 10% chance to run cleanup\n    _cache__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cleanup();\n  }\n  return data;\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL3F1YXJrLWFwaS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEI7QUFDc0I7QUFFM0MsZUFBZUUsbUJBQW1CQSxDQUFDQyxRQUFRLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEVBQUU7RUFDcEUsTUFBTUMsUUFBUSxHQUFJLFNBQVFKLFFBQVMsU0FBUUUsSUFBSyxTQUFRQyxJQUFLLEVBQUM7RUFDOUQsTUFBTUUsVUFBVSxHQUFHUixrREFBUyxDQUFDTyxRQUFRLENBQUM7RUFFdEMsSUFBSUMsVUFBVSxFQUFFO0lBQ1osT0FBT0UsZUFBZSxDQUFDRixVQUFVLENBQUM7RUFDdEM7RUFFQSxNQUFNRyxJQUFJLEdBQUcsTUFBTVYsK0RBQWUsQ0FBQ0UsUUFBUSxFQUFFQyxNQUFNLEVBQUVDLElBQUksRUFBRUMsSUFBSSxDQUFDO0VBRWhFLElBQUlLLElBQUksRUFBRUMsTUFBTSxLQUFLLEdBQUcsRUFBRTtJQUN0Qlosa0RBQVMsQ0FBQ08sUUFBUSxFQUFFRyxlQUFlLENBQUNDLElBQUksQ0FBQyxDQUFDO0VBQzlDOztFQUVBO0VBQ0EsSUFBSUcsSUFBSSxDQUFDQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRTtJQUFFO0lBQ3ZCZixzREFBYSxDQUFDLENBQUM7RUFDbkI7RUFFQSxPQUFPVyxJQUFJO0FBQ2YsQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxMb25nXFxEZXNrdG9wXFxmb2xkZXJcXENvZGVcXHF1YXJrXFx1dGlsc1xccXVhcmstYXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjYWNoZSBmcm9tICcuL2NhY2hlJztcclxuaW1wb3J0IHsgZmV0Y2hRdWFya0ZpbGVzIH0gZnJvbSAnLi9xdWFyay1oZWxwZXJzJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYWNoZWRRdWFya0ZpbGVzKHBkaXJfZmlkLCBjb29raWUsIHBhZ2UsIHNvcnQpIHtcclxuICAgIGNvbnN0IGNhY2hlS2V5ID0gYGZpbGVzOiR7cGRpcl9maWR9LXBhZ2U6JHtwYWdlfS1zb3J0OiR7c29ydH1gO1xyXG4gICAgY29uc3QgY2FjaGVkRGF0YSA9IGNhY2hlLmdldChjYWNoZUtleSk7XHJcblxyXG4gICAgaWYgKGNhY2hlZERhdGEpIHtcclxuICAgICAgICByZXR1cm4gc3RydWN0dXJlZENsb25lKGNhY2hlZERhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmZXRjaFF1YXJrRmlsZXMocGRpcl9maWQsIGNvb2tpZSwgcGFnZSwgc29ydCk7XHJcbiAgICBcclxuICAgIGlmIChkYXRhPy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgIGNhY2hlLnNldChjYWNoZUtleSwgc3RydWN0dXJlZENsb25lKGRhdGEpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2xlYW4gdXAgZXhwaXJlZCBjYWNoZSBpdGVtcyBvY2Nhc2lvbmFsbHlcclxuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4xKSB7IC8vIDEwJSBjaGFuY2UgdG8gcnVuIGNsZWFudXBcclxuICAgICAgICBjYWNoZS5jbGVhbnVwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbn1cclxuIl0sIm5hbWVzIjpbImNhY2hlIiwiZmV0Y2hRdWFya0ZpbGVzIiwiZ2V0Q2FjaGVkUXVhcmtGaWxlcyIsInBkaXJfZmlkIiwiY29va2llIiwicGFnZSIsInNvcnQiLCJjYWNoZUtleSIsImNhY2hlZERhdGEiLCJnZXQiLCJzdHJ1Y3R1cmVkQ2xvbmUiLCJkYXRhIiwic3RhdHVzIiwic2V0IiwiTWF0aCIsInJhbmRvbSIsImNsZWFudXAiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./utils/quark-api.js\n");

/***/ }),

/***/ "(api-node)/./utils/quark-helpers.js":
/*!********************************!*\
  !*** ./utils/quark-helpers.js ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchQuarkFiles: () => (/* binding */ fetchQuarkFiles)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(api-node)/./utils/config.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst getHeaders = cookie => ({\n  'Accept': 'application/json, text/plain, */*',\n  'Referer': 'https://pan.quark.cn/',\n  'User-Agent': _config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].userAgent,\n  'Cookie': cookie\n});\nasync function fetchAllSharedFids(cookie) {\n  const headers = getHeaders(cookie);\n  const url = 'https://drive-pc.quark.cn/1/clouddrive/share/mypage/detail?pr=ucpro&fr=pc&uc_param_str=&_page=1&_size=1000&_order_field=created_at&_order_type=desc&_fetch_total=1&_fetch_notify_follow=1';\n  try {\n    const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(url, {\n      headers\n    });\n    const data = response.data;\n    if (data && data.data && data.data.list) {\n      // 提取所有分享项的 fid，并放入一个 Set 中以便快速查找\n      const fids = new Set(data.data.list.map(item => item.fid));\n      return fids;\n    }\n    return new Set();\n  } catch (error) {\n    if (_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].enableDebugLogging) {\n      const errorMsg = error.response?.data?.message || error.message;\n      console.error(`Failed to fetch all shared fids: ${errorMsg}`);\n    }\n    return new Set();\n  }\n}\nasync function fetchQuarkFiles(pdir_fid, cookie, page = 1, sort = 'file_name:asc') {\n  const queryParams = {\n    pr: 'ucpro',\n    fr: 'pc',\n    uc_param_str: '',\n    pdir_fid: pdir_fid,\n    _page: page,\n    _size: _config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].apiPageSize,\n    _fetch_total: 1,\n    _fetch_sub_dirs: 0\n  };\n  if (_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].enableSorting) {\n    queryParams._sort = `file_type:asc,${sort}`;\n  }\n  const params = new URLSearchParams(queryParams);\n  const url = `https://drive-pc.quark.cn/1/clouddrive/file/sort?${params.toString()}`;\n  const [response, sharedFids] = await Promise.all([axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(url, {\n    headers: getHeaders(cookie)\n  }), _config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].enableShareDetection ? fetchAllSharedFids(cookie) : Promise.resolve(new Set())]);\n  const contentType = response.headers['content-type'];\n  if (!contentType || !contentType.includes('application/json')) {\n    throw new Error('Invalid response from Quark API. The cookie might be expired or invalid.');\n  }\n  if (!response.data || !response.data.data || !response.data.data.list) {\n    return response.data;\n  }\n  let fileList = response.data.data.list;\n  if (_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].enableShareDetection) {\n    fileList = fileList.map(file => {\n      if (file.dir) {\n        return {\n          ...file,\n          is_shared: sharedFids.has(file.fid)\n        };\n      }\n      return file;\n    });\n  }\n  response.data.data.list = fileList;\n  return response.data;\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBa0IsQ0FBQyxFQUFFO0lBQzNELE1BQU0sSUFBSUMsS0FBSyxDQUFDLDBFQUEwRSxDQUFDO0VBQy9GO0VBRUEsSUFBSSxDQUFDdkMsUUFBUSxDQUFDRSxJQUFJLElBQUksQ0FBQ0YsUUFBUSxDQUFDRSxJQUFJLENBQUNBLElBQUksSUFBSSxDQUFDRixRQUFRLENBQUNFLElBQUksQ0FBQ0EsSUFBSSxDQUFDQyxJQUFJLEVBQUU7SUFDbkUsT0FBT0gsUUFBUSxDQUFDRSxJQUFJO0VBQ3hCO0VBRUEsSUFBSXNDLFFBQVEsR0FBR3hDLFFBQVEsQ0FBQ0UsSUFBSSxDQUFDQSxJQUFJLENBQUNDLElBQUk7RUFFdEMsSUFBSVYsdUVBQWdDLEVBQUU7SUFDbEMrQyxRQUFRLEdBQUdBLFFBQVEsQ0FBQ2xDLEdBQUcsQ0FBQ21DLElBQUksSUFBSTtNQUM1QixJQUFJQSxJQUFJLENBQUNDLEdBQUcsRUFBRTtRQUNWLE9BQU87VUFBRSxHQUFHRCxJQUFJO1VBQUVFLFNBQVMsRUFBRVgsVUFBVSxDQUFDWSxHQUFHLENBQUNILElBQUksQ0FBQ2pDLEdBQUc7UUFBRSxDQUFDO01BQzNEO01BQ0EsT0FBT2lDLElBQUk7SUFDZixDQUFDLENBQUM7RUFDTjtFQUVBekMsUUFBUSxDQUFDRSxJQUFJLENBQUNBLElBQUksQ0FBQ0MsSUFBSSxHQUFHcUMsUUFBUTtFQUNsQyxPQUFPeEMsUUFBUSxDQUFDRSxJQUFJO0FBQ3hCLEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTG9uZ1xcRGVza3RvcFxcZm9sZGVyXFxDb2RlXFxxdWFya1xcdXRpbHNcXHF1YXJrLWhlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuaW1wb3J0IHF1YXJrQ29uZmlnIGZyb20gJy4vY29uZmlnLmpzJztcclxuXHJcbmNvbnN0IGdldEhlYWRlcnMgPSAoY29va2llKSA9PiAoe1xyXG4gICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonLFxyXG4gICAgJ1JlZmVyZXInOiAnaHR0cHM6Ly9wYW4ucXVhcmsuY24vJyxcclxuICAgICdVc2VyLUFnZW50JzogcXVhcmtDb25maWcudXNlckFnZW50LFxyXG4gICAgJ0Nvb2tpZSc6IGNvb2tpZSxcclxufSk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEFsbFNoYXJlZEZpZHMoY29va2llKSB7XHJcbiAgICBjb25zdCBoZWFkZXJzID0gZ2V0SGVhZGVycyhjb29raWUpO1xyXG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vZHJpdmUtcGMucXVhcmsuY24vMS9jbG91ZGRyaXZlL3NoYXJlL215cGFnZS9kZXRhaWw/cHI9dWNwcm8mZnI9cGMmdWNfcGFyYW1fc3RyPSZfcGFnZT0xJl9zaXplPTEwMDAmX29yZGVyX2ZpZWxkPWNyZWF0ZWRfYXQmX29yZGVyX3R5cGU9ZGVzYyZfZmV0Y2hfdG90YWw9MSZfZmV0Y2hfbm90aWZ5X2ZvbGxvdz0xJztcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHVybCwgeyBoZWFkZXJzIH0pO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEuZGF0YSAmJiBkYXRhLmRhdGEubGlzdCkge1xyXG4gICAgICAgICAgICAvLyDmj5Dlj5bmiYDmnInliIbkuqvpobnnmoQgZmlk77yM5bm25pS+5YWl5LiA5LiqIFNldCDkuK3ku6Xkvr/lv6vpgJ/mn6Xmib5cclxuICAgICAgICAgICAgY29uc3QgZmlkcyA9IG5ldyBTZXQoZGF0YS5kYXRhLmxpc3QubWFwKGl0ZW0gPT4gaXRlbS5maWQpKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpZHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgU2V0KCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGlmIChxdWFya0NvbmZpZy5lbmFibGVEZWJ1Z0xvZ2dpbmcpIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggYWxsIHNoYXJlZCBmaWRzOiAke2Vycm9yTXNnfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFNldCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hRdWFya0ZpbGVzKHBkaXJfZmlkLCBjb29raWUsIHBhZ2UgPSAxLCBzb3J0ID0gJ2ZpbGVfbmFtZTphc2MnKSB7XHJcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcclxuICAgICAgICBwcjogJ3VjcHJvJyxcclxuICAgICAgICBmcjogJ3BjJyxcclxuICAgICAgICB1Y19wYXJhbV9zdHI6ICcnLFxyXG4gICAgICAgIHBkaXJfZmlkOiBwZGlyX2ZpZCxcclxuICAgICAgICBfcGFnZTogcGFnZSxcclxuICAgICAgICBfc2l6ZTogcXVhcmtDb25maWcuYXBpUGFnZVNpemUsXHJcbiAgICAgICAgX2ZldGNoX3RvdGFsOiAxLFxyXG4gICAgICAgIF9mZXRjaF9zdWJfZGlyczogMCxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHF1YXJrQ29uZmlnLmVuYWJsZVNvcnRpbmcpIHtcclxuICAgICAgICBxdWVyeVBhcmFtcy5fc29ydCA9IGBmaWxlX3R5cGU6YXNjLCR7c29ydH1gO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlQYXJhbXMpO1xyXG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vZHJpdmUtcGMucXVhcmsuY24vMS9jbG91ZGRyaXZlL2ZpbGUvc29ydD8ke3BhcmFtcy50b1N0cmluZygpfWA7XHJcblxyXG4gICAgY29uc3QgW3Jlc3BvbnNlLCBzaGFyZWRGaWRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICBheGlvcy5nZXQodXJsLCB7IGhlYWRlcnM6IGdldEhlYWRlcnMoY29va2llKSB9KSxcclxuICAgICAgICBxdWFya0NvbmZpZy5lbmFibGVTaGFyZURldGVjdGlvbiA/IGZldGNoQWxsU2hhcmVkRmlkcyhjb29raWUpIDogUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQoKSlcclxuICAgIF0pO1xyXG5cclxuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ107XHJcbiAgICBpZiAoIWNvbnRlbnRUeXBlIHx8ICFjb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIGZyb20gUXVhcmsgQVBJLiBUaGUgY29va2llIG1pZ2h0IGJlIGV4cGlyZWQgb3IgaW52YWxpZC4nKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLmRhdGEgfHwgIXJlc3BvbnNlLmRhdGEuZGF0YSB8fCAhcmVzcG9uc2UuZGF0YS5kYXRhLmxpc3QpIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZmlsZUxpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEubGlzdDtcclxuXHJcbiAgICBpZiAocXVhcmtDb25maWcuZW5hYmxlU2hhcmVEZXRlY3Rpb24pIHtcclxuICAgICAgICBmaWxlTGlzdCA9IGZpbGVMaXN0Lm1hcChmaWxlID0+IHtcclxuICAgICAgICAgICAgaWYgKGZpbGUuZGlyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5maWxlLCBpc19zaGFyZWQ6IHNoYXJlZEZpZHMuaGFzKGZpbGUuZmlkKSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmaWxlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5saXN0ID0gZmlsZUxpc3Q7XHJcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxufVxyXG4iXSwibmFtZXMiOlsiYXhpb3MiLCJxdWFya0NvbmZpZyIsImdldEhlYWRlcnMiLCJjb29raWUiLCJ1c2VyQWdlbnQiLCJmZXRjaEFsbFNoYXJlZEZpZHMiLCJoZWFkZXJzIiwidXJsIiwicmVzcG9uc2UiLCJnZXQiLCJkYXRhIiwibGlzdCIsImZpZHMiLCJTZXQiLCJtYXAiLCJpdGVtIiwiZmlkIiwiZXJyb3IiLCJlbmFibGVEZWJ1Z0xvZ2dpbmciLCJlcnJvck1zZyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwiZmV0Y2hRdWFya0ZpbGVzIiwicGRpcl9maWQiLCJwYWdlIiwic29ydCIsInF1ZXJ5UGFyYW1zIiwicHIiLCJmciIsInVjX3BhcmFtX3N0ciIsIl9wYWdlIiwiX3NpemUiLCJhcGlQYWdlU2l6ZSIsIl9mZXRjaF90b3RhbCIsIl9mZXRjaF9zdWJfZGlycyIsImVuYWJsZVNvcnRpbmciLCJfc29ydCIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwic2hhcmVkRmlkcyIsIlByb21pc2UiLCJhbGwiLCJlbmFibGVTaGFyZURldGVjdGlvbiIsInJlc29sdmUiLCJjb250ZW50VHlwZSIsImluY2x1ZGVzIiwiRXJyb3IiLCJmaWxlTGlzdCIsImZpbGUiLCJkaXIiLCJpc19zaGFyZWQiLCJoYXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./utils/quark-helpers.js\n");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.3.4_@babel+core@7.2_3e2eebc2d06427d442dba2246cbfad72"], () => (__webpack_exec__("(api-node)/./node_modules/.pnpm/next@15.3.4_@babel+core@7.2_3e2eebc2d06427d442dba2246cbfad72/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();