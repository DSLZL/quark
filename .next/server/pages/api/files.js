"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/files";
exports.ids = ["pages/api/files"];
exports.modules = {

/***/ "(api-node)/./node_modules/.pnpm/next@15.3.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles.js&middlewareConfigBase64=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.3.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles.js&middlewareConfigBase64=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/.pnpm/next@15.3.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/.pnpm/next@15.3.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/.pnpm/next@15.3.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\files.js */ \"(api-node)/./pages/api/files.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/files\",\n        pathname: \"/api/files\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_files_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9uZXh0QDE1LjMuNF9yZWFjdC1kb21AMTkuMS4wX3JlYWN0QDE5LjEuMF9fcmVhY3RAMTkuMS4wL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZmlsZXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2ZpbGVzLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQ21EO0FBQ25EO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxnREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsZ0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcZmlsZXMuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2ZpbGVzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZmlsZXNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/.pnpm/next@15.3.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/files.js":
/*!****************************!*\
  !*** ./pages/api/files.js ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _utils_quark_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/quark-api */ \"(api-node)/./utils/quark-api.js\");\n/* harmony import */ var _utils_db_cache__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/db-cache */ \"(api-node)/./utils/db-cache.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_utils_quark_api__WEBPACK_IMPORTED_MODULE_0__]);\n_utils_quark_api__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n    const cookie = process.env.QUARK_COOKIE;\n    if (!cookie) {\n        return res.status(500).json({\n            error: 'Server misconfiguration: QUARK_COOKIE is not set.'\n        });\n    }\n    const { pdir_fid, page = 1, sort = 'file_name:asc' } = req.query;\n    if (!pdir_fid) {\n        return res.status(400).json({\n            error: 'pdir_fid parameter is required.'\n        });\n    }\n    try {\n        const data = await (0,_utils_quark_api__WEBPACK_IMPORTED_MODULE_0__.getCachedQuarkFiles)(pdir_fid, cookie, page, sort);\n        if (data.status !== 200) {\n            const errorMessage = data.message === 'require login [guest]' ? 'Cookie已失效' : data.message;\n            return res.status(502).json({\n                error: 'Failed to fetch data from Quark API.',\n                details: errorMessage\n            });\n        }\n        // We are now triggering the indexer from the frontend.\n        // This endpoint is only responsible for serving file pages.\n        // We can still cache the page we fetched to speed up initial view.\n        if (data.data && data.data.list && data.data.list.length > 0) {\n            (0,_utils_db_cache__WEBPACK_IMPORTED_MODULE_1__.cacheFilesToDb)(data.data.list).catch((err)=>{\n                console.error(\"Error in background DB cache for page:\", err);\n            });\n        }\n        res.status(200).json(data);\n    } catch (error) {\n        console.error('API route error:', error);\n        res.status(500).json({\n            error: 'An unexpected server error occurred.',\n            details: error.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9maWxlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEQ7QUFDTjtBQUV2QyxlQUFlRSxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDMUMsTUFBTUMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0lBQ3ZDLElBQUksQ0FBQ0gsUUFBUTtRQUNULE9BQU9ELElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFvRDtJQUM3RjtJQUVBLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxPQUFPLENBQUMsRUFBRUMsT0FBTyxlQUFlLEVBQUUsR0FBR1gsSUFBSVksS0FBSztJQUVoRSxJQUFJLENBQUNILFVBQVU7UUFDWCxPQUFPUixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBa0M7SUFDM0U7SUFFQSxJQUFJO1FBQ0EsTUFBTUssT0FBTyxNQUFNaEIscUVBQW1CQSxDQUFDWSxVQUFVUCxRQUFRUSxNQUFNQztRQUUvRCxJQUFJRSxLQUFLUCxNQUFNLEtBQUssS0FBSztZQUNyQixNQUFNUSxlQUFlRCxLQUFLRSxPQUFPLEtBQUssMEJBQTBCLGNBQWNGLEtBQUtFLE9BQU87WUFDMUYsT0FBT2QsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztnQkFBd0NRLFNBQVNGO1lBQWE7UUFDdkc7UUFFQSx1REFBdUQ7UUFDdkQsNERBQTREO1FBQzVELG1FQUFtRTtRQUNuRSxJQUFJRCxLQUFLQSxJQUFJLElBQUlBLEtBQUtBLElBQUksQ0FBQ0ksSUFBSSxJQUFJSixLQUFLQSxJQUFJLENBQUNJLElBQUksQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7WUFDMURwQiwrREFBY0EsQ0FBQ2UsS0FBS0EsSUFBSSxDQUFDSSxJQUFJLEVBQUVFLEtBQUssQ0FBQ0MsQ0FBQUE7Z0JBQ2pDQyxRQUFRYixLQUFLLENBQUMsMENBQTBDWTtZQUM1RDtRQUNKO1FBRUFuQixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDTTtJQUV6QixFQUFFLE9BQU9MLE9BQU87UUFDWmEsUUFBUWIsS0FBSyxDQUFDLG9CQUFvQkE7UUFDbENQLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDakJDLE9BQU87WUFDUFEsU0FBU1IsTUFBTU8sT0FBTztRQUMxQjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTG9uZ1xcRGVza3RvcFxcZm9sZGVyXFxDb2RlXFxxdWFya1xccGFnZXNcXGFwaVxcZmlsZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q2FjaGVkUXVhcmtGaWxlcyB9IGZyb20gJy4uLy4uL3V0aWxzL3F1YXJrLWFwaSc7XHJcbmltcG9ydCB7IGNhY2hlRmlsZXNUb0RiIH0gZnJvbSAnLi4vLi4vdXRpbHMvZGItY2FjaGUnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gICAgY29uc3QgY29va2llID0gcHJvY2Vzcy5lbnYuUVVBUktfQ09PS0lFO1xyXG4gICAgaWYgKCFjb29raWUpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1NlcnZlciBtaXNjb25maWd1cmF0aW9uOiBRVUFSS19DT09LSUUgaXMgbm90IHNldC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgcGRpcl9maWQsIHBhZ2UgPSAxLCBzb3J0ID0gJ2ZpbGVfbmFtZTphc2MnIH0gPSByZXEucXVlcnk7XHJcblxyXG4gICAgaWYgKCFwZGlyX2ZpZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAncGRpcl9maWQgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0Q2FjaGVkUXVhcmtGaWxlcyhwZGlyX2ZpZCwgY29va2llLCBwYWdlLCBzb3J0KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZGF0YS5zdGF0dXMgIT09IDIwMCkge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2UgPT09ICdyZXF1aXJlIGxvZ2luIFtndWVzdF0nID8gJ0Nvb2tpZeW3suWkseaViCcgOiBkYXRhLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMikuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGRhdGEgZnJvbSBRdWFyayBBUEkuJywgZGV0YWlsczogZXJyb3JNZXNzYWdlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBXZSBhcmUgbm93IHRyaWdnZXJpbmcgdGhlIGluZGV4ZXIgZnJvbSB0aGUgZnJvbnRlbmQuXHJcbiAgICAgICAgLy8gVGhpcyBlbmRwb2ludCBpcyBvbmx5IHJlc3BvbnNpYmxlIGZvciBzZXJ2aW5nIGZpbGUgcGFnZXMuXHJcbiAgICAgICAgLy8gV2UgY2FuIHN0aWxsIGNhY2hlIHRoZSBwYWdlIHdlIGZldGNoZWQgdG8gc3BlZWQgdXAgaW5pdGlhbCB2aWV3LlxyXG4gICAgICAgIGlmIChkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLmxpc3QgJiYgZGF0YS5kYXRhLmxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjYWNoZUZpbGVzVG9EYihkYXRhLmRhdGEubGlzdCkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBiYWNrZ3JvdW5kIERCIGNhY2hlIGZvciBwYWdlOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oZGF0YSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdBUEkgcm91dGUgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgICAgICAgIGVycm9yOiAnQW4gdW5leHBlY3RlZCBzZXJ2ZXIgZXJyb3Igb2NjdXJyZWQuJywgXHJcbiAgICAgICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImdldENhY2hlZFF1YXJrRmlsZXMiLCJjYWNoZUZpbGVzVG9EYiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJjb29raWUiLCJwcm9jZXNzIiwiZW52IiwiUVVBUktfQ09PS0lFIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwicGRpcl9maWQiLCJwYWdlIiwic29ydCIsInF1ZXJ5IiwiZGF0YSIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwibGlzdCIsImxlbmd0aCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/files.js\n");

/***/ }),

/***/ "(api-node)/./utils/cache.js":
/*!************************!*\
  !*** ./utils/cache.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Simple in-memory cache with a TTL (Time-To-Live)\nconst CACHE_TTL = 5 * 60 * 1000; // 5 minutes\nclass Cache {\n    constructor(ttl){\n        this.cache = new Map();\n        this.ttl = ttl;\n    }\n    get(key) {\n        const item = this.cache.get(key);\n        if (item && Date.now() - item.timestamp < this.ttl) {\n            return item.data;\n        }\n        this.cache.delete(key); // Delete expired item\n        return null;\n    }\n    set(key, value) {\n        this.cache.set(key, {\n            timestamp: Date.now(),\n            data: value\n        });\n    }\n    delete(key) {\n        this.cache.delete(key);\n    }\n    clear() {\n        this.cache.clear();\n    }\n    // Clean up expired cache items occasionally\n    cleanup() {\n        if (Math.random() < 0.1) {\n            for (const [key, value] of this.cache.entries()){\n                if (Date.now() - value.timestamp > this.ttl) {\n                    this.cache.delete(key);\n                }\n            }\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new Cache(CACHE_TTL));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL2NhY2hlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxtREFBbUQ7QUFDbkQsTUFBTUEsWUFBWSxJQUFJLEtBQUssTUFBTSxZQUFZO0FBRTdDLE1BQU1DO0lBQ0ZDLFlBQVlDLEdBQUcsQ0FBRTtRQUNiLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUlDO1FBQ2pCLElBQUksQ0FBQ0YsR0FBRyxHQUFHQTtJQUNmO0lBRUFHLElBQUlDLEdBQUcsRUFBRTtRQUNMLE1BQU1DLE9BQU8sSUFBSSxDQUFDSixLQUFLLENBQUNFLEdBQUcsQ0FBQ0M7UUFDNUIsSUFBSUMsUUFBU0MsS0FBS0MsR0FBRyxLQUFLRixLQUFLRyxTQUFTLEdBQUcsSUFBSSxDQUFDUixHQUFHLEVBQUc7WUFDbEQsT0FBT0ssS0FBS0ksSUFBSTtRQUNwQjtRQUNBLElBQUksQ0FBQ1IsS0FBSyxDQUFDUyxNQUFNLENBQUNOLE1BQU0sc0JBQXNCO1FBQzlDLE9BQU87SUFDWDtJQUVBTyxJQUFJUCxHQUFHLEVBQUVRLEtBQUssRUFBRTtRQUNaLElBQUksQ0FBQ1gsS0FBSyxDQUFDVSxHQUFHLENBQUNQLEtBQUs7WUFDaEJJLFdBQVdGLEtBQUtDLEdBQUc7WUFDbkJFLE1BQU1HO1FBQ1Y7SUFDSjtJQUVBRixPQUFPTixHQUFHLEVBQUU7UUFDUixJQUFJLENBQUNILEtBQUssQ0FBQ1MsTUFBTSxDQUFDTjtJQUN0QjtJQUVBUyxRQUFRO1FBQ0osSUFBSSxDQUFDWixLQUFLLENBQUNZLEtBQUs7SUFDcEI7SUFFQSw0Q0FBNEM7SUFDNUNDLFVBQVU7UUFDTixJQUFJQyxLQUFLQyxNQUFNLEtBQUssS0FBSztZQUNyQixLQUFLLE1BQU0sQ0FBQ1osS0FBS1EsTUFBTSxJQUFJLElBQUksQ0FBQ1gsS0FBSyxDQUFDZ0IsT0FBTyxHQUFJO2dCQUM3QyxJQUFJWCxLQUFLQyxHQUFHLEtBQUtLLE1BQU1KLFNBQVMsR0FBRyxJQUFJLENBQUNSLEdBQUcsRUFBRTtvQkFDekMsSUFBSSxDQUFDQyxLQUFLLENBQUNTLE1BQU0sQ0FBQ047Z0JBQ3RCO1lBQ0o7UUFDSjtJQUNKO0FBQ0o7QUFFQSxpRUFBZSxJQUFJTixNQUFNRCxVQUFVQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvbmdcXERlc2t0b3BcXGZvbGRlclxcQ29kZVxccXVhcmtcXHV0aWxzXFxjYWNoZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTaW1wbGUgaW4tbWVtb3J5IGNhY2hlIHdpdGggYSBUVEwgKFRpbWUtVG8tTGl2ZSlcclxuY29uc3QgQ0FDSEVfVFRMID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzXHJcblxyXG5jbGFzcyBDYWNoZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0dGwpIHtcclxuICAgICAgICB0aGlzLmNhY2hlID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMudHRsID0gdHRsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldChrZXkpIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoaXRlbSAmJiAoRGF0ZS5ub3coKSAtIGl0ZW0udGltZXN0YW1wIDwgdGhpcy50dGwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7IC8vIERlbGV0ZSBleHBpcmVkIGl0ZW1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwge1xyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgIGRhdGE6IHZhbHVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZShrZXkpIHtcclxuICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2xlYW4gdXAgZXhwaXJlZCBjYWNoZSBpdGVtcyBvY2Nhc2lvbmFsbHlcclxuICAgIGNsZWFudXAoKSB7XHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjEpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5jYWNoZS5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gdmFsdWUudGltZXN0YW1wID4gdGhpcy50dGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgQ2FjaGUoQ0FDSEVfVFRMKTtcclxuIl0sIm5hbWVzIjpbIkNBQ0hFX1RUTCIsIkNhY2hlIiwiY29uc3RydWN0b3IiLCJ0dGwiLCJjYWNoZSIsIk1hcCIsImdldCIsImtleSIsIml0ZW0iLCJEYXRlIiwibm93IiwidGltZXN0YW1wIiwiZGF0YSIsImRlbGV0ZSIsInNldCIsInZhbHVlIiwiY2xlYXIiLCJjbGVhbnVwIiwiTWF0aCIsInJhbmRvbSIsImVudHJpZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./utils/cache.js\n");

/***/ }),

/***/ "(api-node)/./utils/config.js":
/*!*************************!*\
  !*** ./utils/config.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// utils/config.js\nconst quarkConfig = {\n    // 是否启用排序功能\n    enableSorting: true,\n    // 是否启用分享检测功能\n    enableShareDetection: false,\n    // 是否启用调试日志\n    enableDebugLogging: false,\n    // API 请求分页大小\n    apiPageSize: 50,\n    // 分享检测最大重试次数\n    shareCheckMaxRetries: 10,\n    // 分享检测轮询间隔（毫秒）\n    shareCheckPollInterval: 500,\n    // API 请求的 User-Agent\n    userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (quarkConfig);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsa0JBQWtCO0FBRWxCLE1BQU1BLGNBQWM7SUFDbEIsV0FBVztJQUNYQyxlQUFlO0lBRWYsYUFBYTtJQUNiQyxzQkFBc0I7SUFFdEIsV0FBVztJQUNYQyxvQkFBb0I7SUFFcEIsYUFBYTtJQUNiQyxhQUFhO0lBRWIsYUFBYTtJQUNiQyxzQkFBc0I7SUFFdEIsZUFBZTtJQUNmQyx3QkFBd0I7SUFFeEIscUJBQXFCO0lBQ3JCQyxXQUFXO0FBQ2I7QUFFQSxpRUFBZVAsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxMb25nXFxEZXNrdG9wXFxmb2xkZXJcXENvZGVcXHF1YXJrXFx1dGlsc1xcY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHV0aWxzL2NvbmZpZy5qc1xyXG5cclxuY29uc3QgcXVhcmtDb25maWcgPSB7XHJcbiAgLy8g5piv5ZCm5ZCv55So5o6S5bqP5Yqf6IO9XHJcbiAgZW5hYmxlU29ydGluZzogdHJ1ZSxcclxuXHJcbiAgLy8g5piv5ZCm5ZCv55So5YiG5Lqr5qOA5rWL5Yqf6IO9XHJcbiAgZW5hYmxlU2hhcmVEZXRlY3Rpb246IGZhbHNlLFxyXG5cclxuICAvLyDmmK/lkKblkK/nlKjosIPor5Xml6Xlv5dcclxuICBlbmFibGVEZWJ1Z0xvZ2dpbmc6IGZhbHNlLFxyXG5cclxuICAvLyBBUEkg6K+35rGC5YiG6aG15aSn5bCPXHJcbiAgYXBpUGFnZVNpemU6IDUwLFxyXG5cclxuICAvLyDliIbkuqvmo4DmtYvmnIDlpKfph43or5XmrKHmlbBcclxuICBzaGFyZUNoZWNrTWF4UmV0cmllczogMTAsXHJcblxyXG4gIC8vIOWIhuS6q+ajgOa1i+i9ruivoumXtOmalO+8iOavq+enku+8iVxyXG4gIHNoYXJlQ2hlY2tQb2xsSW50ZXJ2YWw6IDUwMCxcclxuXHJcbiAgLy8gQVBJIOivt+axgueahCBVc2VyLUFnZW50XHJcbiAgdXNlckFnZW50OiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMC4wLjAuMCBTYWZhcmkvNTM3LjM2JyxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHF1YXJrQ29uZmlnO1xyXG4iXSwibmFtZXMiOlsicXVhcmtDb25maWciLCJlbmFibGVTb3J0aW5nIiwiZW5hYmxlU2hhcmVEZXRlY3Rpb24iLCJlbmFibGVEZWJ1Z0xvZ2dpbmciLCJhcGlQYWdlU2l6ZSIsInNoYXJlQ2hlY2tNYXhSZXRyaWVzIiwic2hhcmVDaGVja1BvbGxJbnRlcnZhbCIsInVzZXJBZ2VudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./utils/config.js\n");

/***/ }),

/***/ "(api-node)/./utils/db-cache.js":
/*!***************************!*\
  !*** ./utils/db-cache.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheFilesToDb: () => (/* binding */ cacheFilesToDb)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(api-node)/./utils/prisma.js\");\n\n// This function is now centralized and removes the transaction wrapper\n// to reduce the likelihood of database deadlocks under high concurrency.\nasync function cacheFilesToDb(files) {\n    if (!files || files.length === 0) {\n        return;\n    }\n    // Execute upserts individually instead of in a single large transaction.\n    // This is less atomic but greatly reduces lock contention.\n    for (const file of files){\n        try {\n            const data = {\n                fid: file.fid,\n                pdir_fid: file.pdir_fid,\n                file_name: file.file_name,\n                size: BigInt(file.size || 0),\n                dir: file.dir === true,\n                updated_at: new Date(file.updated_at || 0),\n                created_at: new Date(file.created_at || 0)\n            };\n            await _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].file.upsert({\n                where: {\n                    fid: file.fid\n                },\n                update: data,\n                create: data\n            });\n        } catch (error) {\n            // Log individual errors but don't stop the whole process.\n            console.error(`Failed to upsert file ${file.fid}:`, error.message);\n        }\n    }\n    console.log(`Processed caching for ${files.length} files.`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL2RiLWNhY2hlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThCO0FBRTlCLHVFQUF1RTtBQUN2RSx5RUFBeUU7QUFDbEUsZUFBZUMsZUFBZUMsS0FBSztJQUN0QyxJQUFJLENBQUNBLFNBQVNBLE1BQU1DLE1BQU0sS0FBSyxHQUFHO1FBQzlCO0lBQ0o7SUFFQSx5RUFBeUU7SUFDekUsMkRBQTJEO0lBQzNELEtBQUssTUFBTUMsUUFBUUYsTUFBTztRQUN0QixJQUFJO1lBQ0EsTUFBTUcsT0FBTztnQkFDVEMsS0FBS0YsS0FBS0UsR0FBRztnQkFDYkMsVUFBVUgsS0FBS0csUUFBUTtnQkFDdkJDLFdBQVdKLEtBQUtJLFNBQVM7Z0JBQ3pCQyxNQUFNQyxPQUFPTixLQUFLSyxJQUFJLElBQUk7Z0JBQzFCRSxLQUFLUCxLQUFLTyxHQUFHLEtBQUs7Z0JBQ2xCQyxZQUFZLElBQUlDLEtBQUtULEtBQUtRLFVBQVUsSUFBSTtnQkFDeENFLFlBQVksSUFBSUQsS0FBS1QsS0FBS1UsVUFBVSxJQUFJO1lBQzVDO1lBQ0EsTUFBTWQsb0RBQVcsQ0FBQ2UsTUFBTSxDQUFDO2dCQUNyQkMsT0FBTztvQkFBRVYsS0FBS0YsS0FBS0UsR0FBRztnQkFBQztnQkFDdkJXLFFBQVFaO2dCQUNSYSxRQUFRYjtZQUNaO1FBQ0osRUFBRSxPQUFPYyxPQUFPO1lBQ1osMERBQTBEO1lBQzFEQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxzQkFBc0IsRUFBRWYsS0FBS0UsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFYSxNQUFNRSxPQUFPO1FBQ3JFO0lBQ0o7SUFDQUQsUUFBUUUsR0FBRyxDQUFDLENBQUMsc0JBQXNCLEVBQUVwQixNQUFNQyxNQUFNLENBQUMsT0FBTyxDQUFDO0FBQzlEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvbmdcXERlc2t0b3BcXGZvbGRlclxcQ29kZVxccXVhcmtcXHV0aWxzXFxkYi1jYWNoZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHJpc21hIGZyb20gJy4vcHJpc21hJztcclxuXHJcbi8vIFRoaXMgZnVuY3Rpb24gaXMgbm93IGNlbnRyYWxpemVkIGFuZCByZW1vdmVzIHRoZSB0cmFuc2FjdGlvbiB3cmFwcGVyXHJcbi8vIHRvIHJlZHVjZSB0aGUgbGlrZWxpaG9vZCBvZiBkYXRhYmFzZSBkZWFkbG9ja3MgdW5kZXIgaGlnaCBjb25jdXJyZW5jeS5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhY2hlRmlsZXNUb0RiKGZpbGVzKSB7XHJcbiAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFeGVjdXRlIHVwc2VydHMgaW5kaXZpZHVhbGx5IGluc3RlYWQgb2YgaW4gYSBzaW5nbGUgbGFyZ2UgdHJhbnNhY3Rpb24uXHJcbiAgICAvLyBUaGlzIGlzIGxlc3MgYXRvbWljIGJ1dCBncmVhdGx5IHJlZHVjZXMgbG9jayBjb250ZW50aW9uLlxyXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGZpZDogZmlsZS5maWQsXHJcbiAgICAgICAgICAgICAgICBwZGlyX2ZpZDogZmlsZS5wZGlyX2ZpZCxcclxuICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogZmlsZS5maWxlX25hbWUsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBCaWdJbnQoZmlsZS5zaXplIHx8IDApLFxyXG4gICAgICAgICAgICAgICAgZGlyOiBmaWxlLmRpciA9PT0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKGZpbGUudXBkYXRlZF9hdCB8fCAwKSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKGZpbGUuY3JlYXRlZF9hdCB8fCAwKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpbGUudXBzZXJ0KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGZpZDogZmlsZS5maWQgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogZGF0YSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZTogZGF0YSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gTG9nIGluZGl2aWR1YWwgZXJyb3JzIGJ1dCBkb24ndCBzdG9wIHRoZSB3aG9sZSBwcm9jZXNzLlxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gdXBzZXJ0IGZpbGUgJHtmaWxlLmZpZH06YCwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coYFByb2Nlc3NlZCBjYWNoaW5nIGZvciAke2ZpbGVzLmxlbmd0aH0gZmlsZXMuYCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInByaXNtYSIsImNhY2hlRmlsZXNUb0RiIiwiZmlsZXMiLCJsZW5ndGgiLCJmaWxlIiwiZGF0YSIsImZpZCIsInBkaXJfZmlkIiwiZmlsZV9uYW1lIiwic2l6ZSIsIkJpZ0ludCIsImRpciIsInVwZGF0ZWRfYXQiLCJEYXRlIiwiY3JlYXRlZF9hdCIsInVwc2VydCIsIndoZXJlIiwidXBkYXRlIiwiY3JlYXRlIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImxvZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./utils/db-cache.js\n");

/***/ }),

/***/ "(api-node)/./utils/prisma.js":
/*!*************************!*\
  !*** ./utils/prisma.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nlet prisma;\nif (false) {} else {\n    if (!global.prisma) {\n        global.prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n    }\n    prisma = global.prisma;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL3ByaXNtYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsSUFBSUM7QUFFSixJQUFJQyxLQUFxQyxFQUFFLEVBRTFDLE1BQU07SUFDTCxJQUFJLENBQUNDLE9BQU9GLE1BQU0sRUFBRTtRQUNsQkUsT0FBT0YsTUFBTSxHQUFHLElBQUlELHdEQUFZQTtJQUNsQztJQUNBQyxTQUFTRSxPQUFPRixNQUFNO0FBQ3hCO0FBRUEsaUVBQWVBLE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTG9uZ1xcRGVza3RvcFxcZm9sZGVyXFxDb2RlXFxxdWFya1xcdXRpbHNcXHByaXNtYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcblxyXG5sZXQgcHJpc21hO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcclxuICBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XHJcbn0gZWxzZSB7XHJcbiAgaWYgKCFnbG9iYWwucHJpc21hKSB7XHJcbiAgICBnbG9iYWwucHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xyXG4gIH1cclxuICBwcmlzbWEgPSBnbG9iYWwucHJpc21hO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBwcmlzbWE7XHJcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiLCJwcm9jZXNzIiwiZ2xvYmFsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./utils/prisma.js\n");

/***/ }),

/***/ "(api-node)/./utils/quark-api.js":
/*!****************************!*\
  !*** ./utils/quark-api.js ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCachedQuarkFiles: () => (/* binding */ getCachedQuarkFiles)\n/* harmony export */ });\n/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cache */ \"(api-node)/./utils/cache.js\");\n/* harmony import */ var _quark_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./quark-helpers */ \"(api-node)/./utils/quark-helpers.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_quark_helpers__WEBPACK_IMPORTED_MODULE_1__]);\n_quark_helpers__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function getCachedQuarkFiles(pdir_fid, cookie, page, sort) {\n    const cacheKey = `files:${pdir_fid}-page:${page}-sort:${sort}`;\n    const cachedData = _cache__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(cacheKey);\n    if (cachedData) {\n        return structuredClone(cachedData);\n    }\n    const data = await (0,_quark_helpers__WEBPACK_IMPORTED_MODULE_1__.fetchQuarkFiles)(pdir_fid, cookie, page, sort);\n    if (data?.status === 200) {\n        _cache__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(cacheKey, structuredClone(data));\n    }\n    // Clean up expired cache items occasionally\n    if (Math.random() < 0.1) {\n        _cache__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cleanup();\n    }\n    return data;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL3F1YXJrLWFwaS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEI7QUFDc0I7QUFFM0MsZUFBZUUsb0JBQW9CQyxRQUFRLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxJQUFJO0lBQ2xFLE1BQU1DLFdBQVcsQ0FBQyxNQUFNLEVBQUVKLFNBQVMsTUFBTSxFQUFFRSxLQUFLLE1BQU0sRUFBRUMsTUFBTTtJQUM5RCxNQUFNRSxhQUFhUixrREFBUyxDQUFDTztJQUU3QixJQUFJQyxZQUFZO1FBQ1osT0FBT0UsZ0JBQWdCRjtJQUMzQjtJQUVBLE1BQU1HLE9BQU8sTUFBTVYsK0RBQWVBLENBQUNFLFVBQVVDLFFBQVFDLE1BQU1DO0lBRTNELElBQUlLLE1BQU1DLFdBQVcsS0FBSztRQUN0Qlosa0RBQVMsQ0FBQ08sVUFBVUcsZ0JBQWdCQztJQUN4QztJQUVBLDRDQUE0QztJQUM1QyxJQUFJRyxLQUFLQyxNQUFNLEtBQUssS0FBSztRQUNyQmYsc0RBQWE7SUFDakI7SUFFQSxPQUFPVztBQUNYIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvbmdcXERlc2t0b3BcXGZvbGRlclxcQ29kZVxccXVhcmtcXHV0aWxzXFxxdWFyay1hcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNhY2hlIGZyb20gJy4vY2FjaGUnO1xyXG5pbXBvcnQgeyBmZXRjaFF1YXJrRmlsZXMgfSBmcm9tICcuL3F1YXJrLWhlbHBlcnMnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhY2hlZFF1YXJrRmlsZXMocGRpcl9maWQsIGNvb2tpZSwgcGFnZSwgc29ydCkge1xyXG4gICAgY29uc3QgY2FjaGVLZXkgPSBgZmlsZXM6JHtwZGlyX2ZpZH0tcGFnZToke3BhZ2V9LXNvcnQ6JHtzb3J0fWA7XHJcbiAgICBjb25zdCBjYWNoZWREYXRhID0gY2FjaGUuZ2V0KGNhY2hlS2V5KTtcclxuXHJcbiAgICBpZiAoY2FjaGVkRGF0YSkge1xyXG4gICAgICAgIHJldHVybiBzdHJ1Y3R1cmVkQ2xvbmUoY2FjaGVkRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoUXVhcmtGaWxlcyhwZGlyX2ZpZCwgY29va2llLCBwYWdlLCBzb3J0KTtcclxuICAgIFxyXG4gICAgaWYgKGRhdGE/LnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgY2FjaGUuc2V0KGNhY2hlS2V5LCBzdHJ1Y3R1cmVkQ2xvbmUoZGF0YSkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDbGVhbiB1cCBleHBpcmVkIGNhY2hlIGl0ZW1zIG9jY2FzaW9uYWxseVxyXG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjEpIHsgLy8gMTAlIGNoYW5jZSB0byBydW4gY2xlYW51cFxyXG4gICAgICAgIGNhY2hlLmNsZWFudXAoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxufVxyXG4iXSwibmFtZXMiOlsiY2FjaGUiLCJmZXRjaFF1YXJrRmlsZXMiLCJnZXRDYWNoZWRRdWFya0ZpbGVzIiwicGRpcl9maWQiLCJjb29raWUiLCJwYWdlIiwic29ydCIsImNhY2hlS2V5IiwiY2FjaGVkRGF0YSIsImdldCIsInN0cnVjdHVyZWRDbG9uZSIsImRhdGEiLCJzdGF0dXMiLCJzZXQiLCJNYXRoIiwicmFuZG9tIiwiY2xlYW51cCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./utils/quark-api.js\n");

/***/ }),

/***/ "(api-node)/./utils/quark-helpers.js":
/*!********************************!*\
  !*** ./utils/quark-helpers.js ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchQuarkFiles: () => (/* binding */ fetchQuarkFiles)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(api-node)/./utils/config.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst getHeaders = (cookie)=>({\n        'Accept': 'application/json, text/plain, */*',\n        'Referer': 'https://pan.quark.cn/',\n        'User-Agent': _config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].userAgent,\n        'Cookie': cookie\n    });\nasync function checkShareStatus(fid, cookie) {\n    const headers = getHeaders(cookie);\n    const url = `https://drive-pc.quark.cn/1/clouddrive/share/list?pr=ucpro&fr=pc&uc_param_str=&pdir_fid=${fid}&_size=1&_page=1`;\n    try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(url, {\n            headers\n        });\n        const data = response.data;\n        // If the request is successful and returns a list, check if it's non-empty.\n        // A non-empty list in the 'list' directory implies it's shared.\n        return data && data.data && data.data.list && data.data.list.length > 0;\n    } catch (error) {\n        if (_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].enableDebugLogging) {\n            const errorMsg = error.response?.data?.message || error.message;\n            console.error(`Failed to check share status for fid ${fid}: ${errorMsg}`);\n        }\n        // In case of any error, assume the folder is not shared.\n        return false;\n    }\n}\nasync function fetchQuarkFiles(pdir_fid, cookie, page = 1, sort = 'file_name:asc') {\n    const queryParams = {\n        pr: 'ucpro',\n        fr: 'pc',\n        uc_param_str: '',\n        pdir_fid: pdir_fid,\n        _page: page,\n        _size: _config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].apiPageSize,\n        _fetch_total: 1,\n        _fetch_sub_dirs: 0\n    };\n    if (_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].enableSorting) {\n        queryParams._sort = `file_type:asc,${sort}`;\n    }\n    const params = new URLSearchParams(queryParams);\n    const url = `https://drive-pc.quark.cn/1/clouddrive/file/sort?${params.toString()}`;\n    const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(url, {\n        headers: getHeaders(cookie)\n    });\n    const contentType = response.headers['content-type'];\n    if (!contentType || !contentType.includes('application/json')) {\n        // This is likely an HTML error page from Quark (e.g., login page)\n        throw new Error('Invalid response from Quark API. The cookie might be expired or invalid.');\n    }\n    if (!response.data || !response.data.data || !response.data.data.list) {\n        // 如果响应中没有文件列表，直接返回原始数据\n        return response.data;\n    }\n    let fileList = response.data.data.list;\n    if (_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].enableShareDetection) {\n        const folders = fileList.filter((file)=>file.dir);\n        const shareStatusPromises = folders.map((folder)=>checkShareStatus(folder.fid, cookie));\n        const shareStatuses = await Promise.all(shareStatusPromises);\n        const shareStatusMap = new Map(folders.map((folder, index)=>[\n                folder.fid,\n                shareStatuses[index]\n            ]));\n        fileList = fileList.map((file)=>{\n            if (file.dir) {\n                return {\n                    ...file,\n                    is_shared: shareStatusMap.get(file.fid) || false\n                };\n            }\n            return file;\n        });\n    }\n    response.data.data.list = fileList;\n    return response.data;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUNILENBQUFBO1lBQ3BCLElBQUlBLEtBQUtDLEdBQUcsRUFBRTtnQkFDVixPQUFPO29CQUFFLEdBQUdELElBQUk7b0JBQUVXLFdBQVdILGVBQWUxQyxHQUFHLENBQUNrQyxLQUFLdEMsR0FBRyxLQUFLO2dCQUFNO1lBQ3ZFO1lBQ0EsT0FBT3NDO1FBQ1g7SUFDSjtJQUVBbkMsU0FBU0UsSUFBSSxDQUFDQSxJQUFJLENBQUNDLElBQUksR0FBRzRCO0lBQzFCLE9BQU8vQixTQUFTRSxJQUFJO0FBQ3hCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvbmdcXERlc2t0b3BcXGZvbGRlclxcQ29kZVxccXVhcmtcXHV0aWxzXFxxdWFyay1oZWxwZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcbmltcG9ydCBxdWFya0NvbmZpZyBmcm9tICcuL2NvbmZpZy5qcyc7XHJcblxyXG5jb25zdCBnZXRIZWFkZXJzID0gKGNvb2tpZSkgPT4gKHtcclxuICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJyxcclxuICAgICdSZWZlcmVyJzogJ2h0dHBzOi8vcGFuLnF1YXJrLmNuLycsXHJcbiAgICAnVXNlci1BZ2VudCc6IHF1YXJrQ29uZmlnLnVzZXJBZ2VudCxcclxuICAgICdDb29raWUnOiBjb29raWUsXHJcbn0pO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tTaGFyZVN0YXR1cyhmaWQsIGNvb2tpZSkge1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoY29va2llKTtcclxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL2RyaXZlLXBjLnF1YXJrLmNuLzEvY2xvdWRkcml2ZS9zaGFyZS9saXN0P3ByPXVjcHJvJmZyPXBjJnVjX3BhcmFtX3N0cj0mcGRpcl9maWQ9JHtmaWR9Jl9zaXplPTEmX3BhZ2U9MWA7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCh1cmwsIHsgaGVhZGVycyB9KTtcclxuICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBzdWNjZXNzZnVsIGFuZCByZXR1cm5zIGEgbGlzdCwgY2hlY2sgaWYgaXQncyBub24tZW1wdHkuXHJcbiAgICAgICAgLy8gQSBub24tZW1wdHkgbGlzdCBpbiB0aGUgJ2xpc3QnIGRpcmVjdG9yeSBpbXBsaWVzIGl0J3Mgc2hhcmVkLlxyXG4gICAgICAgIHJldHVybiBkYXRhICYmIGRhdGEuZGF0YSAmJiBkYXRhLmRhdGEubGlzdCAmJiBkYXRhLmRhdGEubGlzdC5sZW5ndGggPiAwO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBpZiAocXVhcmtDb25maWcuZW5hYmxlRGVidWdMb2dnaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNoZWNrIHNoYXJlIHN0YXR1cyBmb3IgZmlkICR7ZmlkfTogJHtlcnJvck1zZ31gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSW4gY2FzZSBvZiBhbnkgZXJyb3IsIGFzc3VtZSB0aGUgZm9sZGVyIGlzIG5vdCBzaGFyZWQuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hRdWFya0ZpbGVzKHBkaXJfZmlkLCBjb29raWUsIHBhZ2UgPSAxLCBzb3J0ID0gJ2ZpbGVfbmFtZTphc2MnKSB7XHJcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcclxuICAgICAgICBwcjogJ3VjcHJvJyxcclxuICAgICAgICBmcjogJ3BjJyxcclxuICAgICAgICB1Y19wYXJhbV9zdHI6ICcnLFxyXG4gICAgICAgIHBkaXJfZmlkOiBwZGlyX2ZpZCxcclxuICAgICAgICBfcGFnZTogcGFnZSxcclxuICAgICAgICBfc2l6ZTogcXVhcmtDb25maWcuYXBpUGFnZVNpemUsXHJcbiAgICAgICAgX2ZldGNoX3RvdGFsOiAxLFxyXG4gICAgICAgIF9mZXRjaF9zdWJfZGlyczogMCxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHF1YXJrQ29uZmlnLmVuYWJsZVNvcnRpbmcpIHtcclxuICAgICAgICBxdWVyeVBhcmFtcy5fc29ydCA9IGBmaWxlX3R5cGU6YXNjLCR7c29ydH1gO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlQYXJhbXMpO1xyXG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vZHJpdmUtcGMucXVhcmsuY24vMS9jbG91ZGRyaXZlL2ZpbGUvc29ydD8ke3BhcmFtcy50b1N0cmluZygpfWA7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQodXJsLCB7XHJcbiAgICAgICAgaGVhZGVyczogZ2V0SGVhZGVycyhjb29raWUpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXTtcclxuICAgIGlmICghY29udGVudFR5cGUgfHwgIWNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcclxuICAgICAgICAvLyBUaGlzIGlzIGxpa2VseSBhbiBIVE1MIGVycm9yIHBhZ2UgZnJvbSBRdWFyayAoZS5nLiwgbG9naW4gcGFnZSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZnJvbSBRdWFyayBBUEkuIFRoZSBjb29raWUgbWlnaHQgYmUgZXhwaXJlZCBvciBpbnZhbGlkLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghcmVzcG9uc2UuZGF0YSB8fCAhcmVzcG9uc2UuZGF0YS5kYXRhIHx8ICFyZXNwb25zZS5kYXRhLmRhdGEubGlzdCkge1xyXG4gICAgICAgIC8vIOWmguaenOWTjeW6lOS4reayoeacieaWh+S7tuWIl+ihqO+8jOebtOaOpei/lOWbnuWOn+Wni+aVsOaNrlxyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBmaWxlTGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5saXN0O1xyXG5cclxuICAgIGlmIChxdWFya0NvbmZpZy5lbmFibGVTaGFyZURldGVjdGlvbikge1xyXG4gICAgICAgIGNvbnN0IGZvbGRlcnMgPSBmaWxlTGlzdC5maWx0ZXIoZmlsZSA9PiBmaWxlLmRpcik7XHJcbiAgICAgICAgY29uc3Qgc2hhcmVTdGF0dXNQcm9taXNlcyA9IGZvbGRlcnMubWFwKGZvbGRlciA9PiBjaGVja1NoYXJlU3RhdHVzKGZvbGRlci5maWQsIGNvb2tpZSkpO1xyXG4gICAgICAgIGNvbnN0IHNoYXJlU3RhdHVzZXMgPSBhd2FpdCBQcm9taXNlLmFsbChzaGFyZVN0YXR1c1Byb21pc2VzKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzaGFyZVN0YXR1c01hcCA9IG5ldyBNYXAoZm9sZGVycy5tYXAoKGZvbGRlciwgaW5kZXgpID0+IFtmb2xkZXIuZmlkLCBzaGFyZVN0YXR1c2VzW2luZGV4XV0pKTtcclxuXHJcbiAgICAgICAgZmlsZUxpc3QgPSBmaWxlTGlzdC5tYXAoZmlsZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmaWxlLmRpcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZmlsZSwgaXNfc2hhcmVkOiBzaGFyZVN0YXR1c01hcC5nZXQoZmlsZS5maWQpIHx8IGZhbHNlIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZpbGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzcG9uc2UuZGF0YS5kYXRhLmxpc3QgPSBmaWxlTGlzdDtcclxuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJheGlvcyIsInF1YXJrQ29uZmlnIiwiZ2V0SGVhZGVycyIsImNvb2tpZSIsInVzZXJBZ2VudCIsImNoZWNrU2hhcmVTdGF0dXMiLCJmaWQiLCJoZWFkZXJzIiwidXJsIiwicmVzcG9uc2UiLCJnZXQiLCJkYXRhIiwibGlzdCIsImxlbmd0aCIsImVycm9yIiwiZW5hYmxlRGVidWdMb2dnaW5nIiwiZXJyb3JNc2ciLCJtZXNzYWdlIiwiY29uc29sZSIsImZldGNoUXVhcmtGaWxlcyIsInBkaXJfZmlkIiwicGFnZSIsInNvcnQiLCJxdWVyeVBhcmFtcyIsInByIiwiZnIiLCJ1Y19wYXJhbV9zdHIiLCJfcGFnZSIsIl9zaXplIiwiYXBpUGFnZVNpemUiLCJfZmV0Y2hfdG90YWwiLCJfZmV0Y2hfc3ViX2RpcnMiLCJlbmFibGVTb3J0aW5nIiwiX3NvcnQiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0b1N0cmluZyIsImNvbnRlbnRUeXBlIiwiaW5jbHVkZXMiLCJFcnJvciIsImZpbGVMaXN0IiwiZW5hYmxlU2hhcmVEZXRlY3Rpb24iLCJmb2xkZXJzIiwiZmlsdGVyIiwiZmlsZSIsImRpciIsInNoYXJlU3RhdHVzUHJvbWlzZXMiLCJtYXAiLCJmb2xkZXIiLCJzaGFyZVN0YXR1c2VzIiwiUHJvbWlzZSIsImFsbCIsInNoYXJlU3RhdHVzTWFwIiwiTWFwIiwiaW5kZXgiLCJpc19zaGFyZWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./utils/quark-helpers.js\n");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.3.4_react-dom@19.1.0_react@19.1.0__react@19.1.0"], () => (__webpack_exec__("(api-node)/./node_modules/.pnpm/next@15.3.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();